<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 什么是数据响应式?

        // 数据驱动视图, 即数据和视图进行绑定, 当数据发生变化后, 视图自动更新.

        // 如何实现数据响应式?

        // 实现数据响应式的核心在于监听数据的变化, 当数据发生变化后, 执行视图更新操作.

        // Vue3 使用代理对象监听数据变化.

        // 创建对象的代理对象, 从而实现对对象操作的拦截和自定义.
        // 代理对象
        const person = {
            name: '张三',
            age: 20
        }
        // p 对象, person 对象的代理对象
        // 对 p 对象进行的所有操作都会映射到 person 对象
        const p = new Proxy(person, {})
        // 查询代码对象
        console.log(p)
        // 修改代理对象中的name属性
        p.name = '李四'
        // 输出源对象中的name
        console.log(person.name)
        // 删除代理对象age
        delete p.age
        // 输出源对象age
        console.log(person.age)
        // 在代理对象增加sex属性
        p.sex = '男'
        // 输出源对象sex属性
        console.log(person.sex)
        const people = {
            name: '张三',
            age: 20,
            brand: {
                group: {
                    title: "宝马"
                }
            }
        }
        const pp = new Proxy(people, {
            get(target, property) {
                console.log("拦截到了获取操作")
                return target[property]
            },
            set(target, property, value) {
                console.log("拦截到了设置或者新增操作");
                target[property] = value;
            },
            deleteProperty(target, property) {
                console.log("拦截到了删除操作");
                return delete target[property];
            },
        })
        pp.brand.group.title = '奔驰'
        // console.log(pp.brand.group.title)
        console.log(people)
    </script>
</body>

</html>